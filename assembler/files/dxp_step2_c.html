<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>C:\Users\dxpeee\Desktop\dxp_ds2_asm\dxp_step2.c</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="SynEdit HTML exporter" />
<style type="text/css">
<!--
body { color: #000000; background-color: #FFFFFF; }
.cpp1-assembler { color: #0000FF; }
.cpp1-character { color: #000000; }
.cpp1-comment { color: #0078D7; font-style: italic; }
.cpp1-float { color: #800080; }
.cpp1-hexadecimal { color: #800080; }
.cpp1-identifier { color: #000000; }
.cpp1-illegalchar { color: #000000; }
.cpp1-number { color: #800080; }
.cpp1-octal { color: #800080; }
.cpp1-preprocessor { color: #008000; }
.cpp1-reservedword { color: #000000; font-weight: bold; }
.cpp1-space { background-color: #FFFFFF; color: #000000; }
.cpp1-string { color: #0000FF; font-weight: bold; }
.cpp1-symbol { color: #FF0000; font-weight: bold; }
-->
</style>
</head>
<body>
<pre>
<code><span style="font: 10pt Consolas;"><span class="cpp1-comment">/*===========================================================================*/
/* The step2_assembly subroutine checks for the correct structure and syntax
of every line of the assembly source code file and assembles the machine code 
in the *.mif output file.
(c) Dorin Patru April 2021 */
/*===========================================================================*/

</span><span class="cpp1-preprocessor">#include &quot;dxp_asm.h&quot; </span><span class="cpp1-comment">/* Contains stdio.lib and std.lib */
</span><span class="cpp1-preprocessor">#include &lt;string.h&gt;
</span><span class="cpp1-reservedword">void</span><span class="cpp1-space"> step2_assembly</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">int1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> int2_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
				int3_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_im</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_opcode</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
				crt_ri</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rifv</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rj</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rjfv</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_mrj</span><span class="cpp1-symbol">)
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Parameter types declarations. */
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-identifier">FILE </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">int1_fname</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> FILE </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">int2_fname</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> FILE </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">int3_fname</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> FILE	</span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_im</span><span class="cpp1-symbol">[</span><span class="cpp1-number">16</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_opcode</span><span class="cpp1-symbol">[</span><span class="cpp1-number">16</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> \
	</span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_ri</span><span class="cpp1-symbol">[</span><span class="cpp1-number">4</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_rifv</span><span class="cpp1-symbol">[</span><span class="cpp1-number">4</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_rj</span><span class="cpp1-symbol">[</span><span class="cpp1-number">4</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> \
	</span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_rjfv</span><span class="cpp1-symbol">[</span><span class="cpp1-number">4</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">const</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> </span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">crt_mrj</span><span class="cpp1-symbol">[</span><span class="cpp1-number">4</span><span class="cpp1-symbol">];
</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Local declarations:
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	FILE	</span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">prev_line</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">char</span><span class="cpp1-space">	crt_line</span><span class="cpp1-symbol">[</span><span class="cpp1-number">81</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">[</span><span class="cpp1-number">17</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">[</span><span class="cpp1-number">6</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> crt_iw1_string</span><span class="cpp1-symbol">[</span><span class="cpp1-number">18</span><span class="cpp1-symbol">];
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">char</span><span class="cpp1-space">	</span><span class="cpp1-symbol">*</span><span class="cpp1-identifier">endptr</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">int</span><span class="cpp1-space">		crt_val</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> test</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_mif_addrs </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_jca </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_jao </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/*Temporary storage for the syllables currently expected and analyzed*/
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">char</span><span class="cpp1-space">	first_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> \
			third_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> fourth_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">],</span><span class="cpp1-space"> fifth_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> 
	</span><span class="cpp1-reservedword">int</span><span class="cpp1-space">		Aeff </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> code_line_number </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> asf_line_number </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">int</span><span class="cpp1-space">	i</span><span class="cpp1-symbol">=</span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> j</span><span class="cpp1-symbol">=</span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> k</span><span class="cpp1-symbol">=</span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> match3 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> match4 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-preprocessor">#define dxpDEBUG = 1;
#define ErrorMnemonic	printf(&quot;\nError: Unexpected mnemonic in line %3u&quot;, asf_line_number);
#define ErrorRifield	printf(&quot;\nError: Unexpected Ri field in line %3u&quot;, asf_line_number);
#define ErrorRjfieldConst	printf(&quot;\nError: Unexpected Rj field constant in line %3u&quot;, asf_line_number);
#define ErrorRjfield	printf(&quot;\nError: Unexpected Rj field in line %3u&quot;, asf_line_number);
#define ErrorJCAfield	printf(&quot;\nError: Unexpected JCA field in line %3u&quot;, asf_line_number);
#define ErrorMRjfield	printf(&quot;\nError: Unexpected MRj field in line %3u&quot;, asf_line_number);
#define ErrorCondField	printf(&quot;\nError: Unexpected Jump Condition field in line %3u&quot;, asf_line_number);
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/*The &quot;symbol table&quot; for the JUMP and CALL addresses*/
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">struct</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-reservedword">char</span><span class="cpp1-space"> jca_label</span><span class="cpp1-symbol">[</span><span class="cpp1-number">20</span><span class="cpp1-symbol">];</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">int</span><span class="cpp1-space"> jca_num</span><span class="cpp1-symbol">;}</span><span class="cpp1-space"> jca</span><span class="cpp1-symbol">[</span><span class="cpp1-number">10</span><span class="cpp1-symbol">];</span><span class="cpp1-space">			
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Print the header of the dxp.mif file */
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;--Program Memory Initialization File \
	\n--Created by dxp_asm \
	\nWIDTH = 8; \
	\nDEPTH = 1024; \
	\nADDRESS_RADIX = HEX;	%% Can be HEX, BIN or DEC %% \
	\nDATA_RADIX = BIN;	%% Can be HEX, BIN or DEC %% \
	\n\nCONTENT BEGIN\n\n&quot;</span><span class="cpp1-symbol">);
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Read the code.txt file and assemble into *.mif*/
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_line</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">!=</span><span class="cpp1-space"> '\n'</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Read the entire NEXT line from code.txt
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fgets</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_line</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">81</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> int1_fname</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">code_line_number</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_line</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> '\n'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\nDone assembly!&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Debugging message:
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		test </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> strlen</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_line</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\nThe length is:= %3u&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> test</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n\nParsing code line %3u:\n %s\n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> code_line_number</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_line</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Initialize syllables to the N/A string
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;N/A&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;N/A&quot;</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;N/A&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">fourth_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;N/A&quot;</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">fifth_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;N/A&quot;</span><span class="cpp1-symbol">);
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Split the current line into parts, i.e. SYLLABLES (Words)
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		sscanf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_line</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%3u %s %s %s %s %s&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">asf_line_number</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
		</span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">fourth_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">fifth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n asf_line_number is := %3u&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> asf_line_number</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n \t first_syllable is := %s&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n \t \t second_syllable is := %s&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n \t \t \t third_syllable is := %s&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n \t \t \t \t fourth_syllable is := %s&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fourth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n \t \t \t \t \t fifth_syllable is := %s\n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fifth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-space">	match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> match3 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	match4 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-comment">//++i;
/*===========================================================================
JUMP Label Check and Update
===========================================================================*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> '@'</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{
</span><span class="cpp1-space">			strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;;&quot;</span><span class="cpp1-symbol">);
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Store the current label and associated mif file address
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">jca</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">crt_iw1</span><span class="cpp1-symbol">].</span><span class="cpp1-identifier">jca_label</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			jca</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">crt_iw1</span><span class="cpp1-symbol">].</span><span class="cpp1-identifier">jca_num </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> crt_mif_addrs</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_iw1</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Transfer syllables for assembly
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fourth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">fourth_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fifth_syllable</span><span class="cpp1-symbol">);</span><span class="cpp1-space">			
		</span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*===========================================================================
ADD, SUB, XOR, AND, OR, CPY
===========================================================================*/
</span><span class="cpp1-space">	i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">while</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">!=</span><span class="cpp1-space"> </span><span class="cpp1-number">8</span><span class="cpp1-symbol">)</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_im</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* If the mnemonic matches concatenate the OpCode field to the IW.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_opcode</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine Rsd and concatenate to the IW, else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{
</span><span class="cpp1-space">				</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_ri</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">				</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rifv</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match2 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorRifield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> 
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine Rs2 and concatenate to the IW, else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{
</span><span class="cpp1-space">				</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rj</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">				</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rjfv</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">]);</span><span class="cpp1-space">	match3 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match3 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorRjfield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}</span><span class="cpp1-space">	
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Manipulate i to skip over OpCodes 2 (INC) and 3 (DEC).
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*===========================================================================
INC, DEC, SHRA, SHxL, RxC, IN or POP, OUT or PUSH
===========================================================================*/
</span><span class="cpp1-space">	i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">2</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">while</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">!=</span><span class="cpp1-space"> </span><span class="cpp1-number">16</span><span class="cpp1-symbol">)</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{</span><span class="cpp1-space">		
	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_im</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* If the mnemonic matches concatenate the OpCode field to the IW.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_opcode</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> 
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine Rsd and concatenate to the IW, else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_ri</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">				</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rifv</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match2 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorRifield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine the value of K and concatenate to IW: read in ASCII characters,
 convert to long integer with strtol, then convert int to binary string for 
 the *mif file, and concatenate to IW; else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			crt_val </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> strtol</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">endptr</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">16</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_val </span><span class="cpp1-symbol">&gt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorRjfieldConst</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">			dxp_int2binstr</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_val</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">2</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> 
			strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> 
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">3</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">8</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">10</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">14</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*===========================================================================
LD and ST
===========================================================================*/
</span><span class="cpp1-space">	i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">11</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">while</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">i </span><span class="cpp1-symbol">!=</span><span class="cpp1-space"> </span><span class="cpp1-number">13</span><span class="cpp1-symbol">)</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> 
	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_im</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* If the mnemonic matches concatenate the OpCode field to the IW.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_opcode</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine Rsd and concatenate to the IW, else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_ri</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">				</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rifv</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match2 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorRifield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine Ra and concatenate to the IW, else exit with an error.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">4</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_mrj</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">				</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_rjfv</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match3 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-space">			</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match3 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorMRjfield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine the value of the address offset and insert into *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">			k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">			crt_val </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> strtol</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">fourth_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-symbol">&amp;</span><span class="cpp1-identifier">endptr</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">16</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			dxp_int2binstr</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_val</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">8</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">);
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fourth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> fourth_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> 	</span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*===========================================================================
JUMP U - unconditional, C - if C=1, N - if N=1, V - if V=1, Z - if Z=1
===========================================================================*/
</span><span class="cpp1-space">		i </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">13</span><span class="cpp1-symbol">;
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_im</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">])</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* If the mnemonic matches concatenate the OpCode field to the IW.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_opcode</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">i</span><span class="cpp1-symbol">]);</span><span class="cpp1-space"> match1 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> k </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Determine the kind of JUMP and complete the IW.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> 		</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> 'U'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;0000&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> 'C'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;1000&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> 'N'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;0100&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> 'V'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;0010&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">else</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">second_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> 'Z'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> strcat</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;0001&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match2 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;}
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">else</span><span class="cpp1-space">	</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorCondField</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_iw0</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> first_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> second_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Deteremine the jump address offset relative to the current PC value.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">	</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">[</span><span class="cpp1-number">0</span><span class="cpp1-symbol">]</span><span class="cpp1-space"> </span><span class="cpp1-symbol">!=</span><span class="cpp1-space"> '@'</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorJCAfield</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">while</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">k </span><span class="cpp1-symbol">&lt;</span><span class="cpp1-space"> </span><span class="cpp1-number">10</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">strcmp</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">third_syllable</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> jca</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">].</span><span class="cpp1-identifier">jca_label</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)
</span><span class="cpp1-space">			</span><span class="cpp1-symbol">{</span><span class="cpp1-space"> crt_jao </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> jca</span><span class="cpp1-symbol">[</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">].</span><span class="cpp1-identifier">jca_num </span><span class="cpp1-symbol">-</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">			dxp_int2binstr</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_jao</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-number">8</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> match3 </span><span class="cpp1-symbol">=</span><span class="cpp1-space"> </span><span class="cpp1-number">1</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space"> </span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">k</span><span class="cpp1-symbol">;</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match3 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;\n this is a forward jump \n&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> 
											strcpy</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">crt_char</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;xxxxxxxx&quot;</span><span class="cpp1-symbol">);</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Printf for debugging purposes.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-preprocessor">#ifdef dxpDEBUG
</span><span class="cpp1-space">		printf</span><span class="cpp1-symbol">(</span><span class="cpp1-string">&quot;%04x : %s; %% %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-preprocessor">#endif
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* FPrintf the IW to the *.mif file.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> </span><span class="cpp1-string">&quot;%04x : %s; %% %s %% \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
	crt_mif_addrs</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_char</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> third_syllable</span><span class="cpp1-symbol">);
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">++</span><span class="cpp1-identifier">crt_mif_addrs</span><span class="cpp1-symbol">;
</span><span class="cpp1-comment">/* Implement here the JUMP forward */
</span><span class="cpp1-space">		</span><span class="cpp1-symbol">}
</span><span class="cpp1-space">		</span><span class="cpp1-reservedword">if</span><span class="cpp1-space"> </span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">match1 </span><span class="cpp1-symbol">==</span><span class="cpp1-space"> </span><span class="cpp1-number">0</span><span class="cpp1-symbol">)</span><span class="cpp1-space"> </span><span class="cpp1-symbol">{</span><span class="cpp1-space"> ErrorMnemonic</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-reservedword">break</span><span class="cpp1-symbol">;</span><span class="cpp1-space"> </span><span class="cpp1-symbol">}</span><span class="cpp1-space">	</span><span class="cpp1-symbol">}
</span><span class="cpp1-comment">/*---------------------------------------------------------------------------*/
/* Initialize the remaining locations in the *.mif file to 0.
/*---------------------------------------------------------------------------*/
</span><span class="cpp1-space">		fprintf</span><span class="cpp1-symbol">(</span><span class="cpp1-identifier">out1_fname</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> \
</span><span class="cpp1-string">&quot;[ %04x .. 3FF ] : 00000000; %% Fill the remaining locations with 0 %% \n END; \n&quot;</span><span class="cpp1-symbol">,</span><span class="cpp1-space"> crt_mif_addrs</span><span class="cpp1-symbol">);</span><span class="cpp1-space">	
	</span><span class="cpp1-reservedword">return</span><span class="cpp1-symbol">;
}</span><span class="cpp1-space">	

</span></span>
</code></pre>
</body>
</html>